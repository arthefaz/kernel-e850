/*
 * SAMSUNG EXYNOS9630 board common device tree source
 *
 * Copyright (c) 2019 Samsung Electronics Co., Ltd.
 *              http://www.samsung.com
 *
 * This program is free software; you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 2 as
 * published by the Free Software Foundation.
 */



/dts-v1/;
/plugin/;

#include <dt-bindings/interrupt-controller/s5e3830.h>
#include "erd3830-pmic.dtsi"
#include "battery_data_erd3830_common_s2mu106.dtsi"

/ {
        fragment@model {
                target-path = "/";
                __overlay__ {
                        #address-cells = <2>;
                        #size-cells = <1>;

                        gpio_keys {
                                status = "okay";
                                compatible = "gpio-keys";
                                pinctrl-names = "default";
                                pinctrl-0 = <&key_voldown &key_volup>;

                                button@1 {
                                        label = "gpio-keys: KEY_VOLUMEDOWN";
                                        linux,code = <114>;
                                        gpios = <&gpa1 0 0xf>;
                                };
                                button@2 {
                                        label = "gpio-keys: KEY_VOLUMEUP";
                                        linux,code = <115>;
                                        gpios = <&gpa0 7 0xf>;
                                };
                        };

						ifconn {
							status = "okay";
							compatible = "samsung,ifconn";
							ifconn,usbpd = "s2mu106";
							ifconn,muic = "s2mu106-muic";
						};

                };


        };

};

&serial_0 {
        status = "okay";
};

&i2c_2 {
	status = "okay";
	#address-cells = <1>;
	#size-cells = <0>;
	touchscreen@20 {
		compatible = "synaptics,rmi4";
		reg = <0x20>;
		pinctrl-names = "on_state", "off_state";
		pinctrl-0 = <&attn_irq &vdd_on>;
		pinctrl-1 = <&attn_input &vdd_off>;
		synaptics,irq_gpio = <&gpa0 0 0>;
		synaptics,irq_type = <8200>;
		synaptics,max_coords = <1440 2560>;     /* x y */
		synaptics,num_lines = <29 16>;          /* rx tx */
		synaptics,regulator_avdd = "vdd_ldo27";
	};
};

&pinctrl_0 {
	attn_irq: attn-irq {
		samsung,pins = "gpa0-0";
		samsung,pin-function = <0xf>;
		samsung,pin-pud = <0>;
		samsung,pin-drv = <0>;
	};

	attn_input: attn-input {
		samsung,pins = "gpa0-0";
		samsung,pin-function = <0>;
		samsung,pin-pud = <1>;
	};
	key_voldown: key-voldown {
               samsung,pins = "gpa1-0";
               samsung,pin-function = <0xf>;
               samsung,pin-pud = <0>;
               samsung,pin-drv = <0>;
	};

	key_volup: key-volup {
               samsung,pins = "gpa0-7";
               samsung,pin-function = <0xf>;
               samsung,pin-pud = <0>;
               samsung,pin-drv = <0>;
	};

	if_pmic_irq: if-pmic-irq {
		samsung,pins = "gpa1-1";
		samsung,pin-function = <0>;
		samsung,pin-pud = <0>;
		samsung,pin-drv = <0>;
	};

	usbpd_irq: usbpd-irq {
		samsung,pins = "gpa0-2";
		samsung,pin-function = <0>;
		samsung,pin-pud = <2>;
		samsung,pin-drv = <0>;
	};
};

&pinctrl_5 {
	vdd_on: vdd-on {
		samsung,pins = "gpg2-6";
		samsung,pin-function = <1>;
		samsung,pin-val = <1>;
		samsung,pin-pud = <3>;
		samsung,pin-drv = <3>;
	};

	vdd_off: vdd-off {
		samsung,pins = "gpg2-6";
		samsung,pin-functon = <1>;
		samsung,pin-val = <0>;
		samsung,pin-pud = <1>;
		samsung,pin-drv = <3>;
	};
};

&i2c_0 {
	#address-cells = <1>;
	#size-cells = <0>;
	status = "okay";
	s2mu106@3D {
		compatible = "samsung,s2mu106mfd";
		reg = <0x3D>;
		pinctrl-names = "default";
		pinctrl-0 = <&if_pmic_irq>;
		s2mu106,irq-gpio = <&gpa1 1 0>;
		s2mu106,wakeup;
	};

	flash_led {
		status = "okay";
		default_current = <50>;
		max_current = <200>;
		default_timer = <0>;

		s2mu106-channel1 {
			id = <0>;
		};

		s2mu106-channel2 {
			id = <1>;
		};

		s2mu106-channel3 {
			id = <2>;
		};

	};

	s2mu106-fuelgauge@3B {
		compatible = "samsung,s2mu106-fuelgauge";
		reg = <0x3B>;
		pinctrl-names = "default";
		fuelgauge,fuel_alert_vol = <3400>;
		fuelgauge,fuel_alert_soc = <1>;
		fuelgauge,type_str = "SDI";
		fuelgauge,model_type = <1>;
	};

	s2mu106-charger {
		 status = "okay";
		 battery,charger_name = "s2mu106-charger";
		 battery,chg_gpio_en = <0>;
		 battery,chg_polarity_en = <0>;
		 battery,chg_gpio_status = <0>;
		 battery,chg_polarity_status = <0>;
		 battery,chg_float_voltage = <4350>;
		 battery,chg_recharge_vcell = <4250>;
		 battery,chg_full_vcell = <4300>;
		 battery,full_check_type = <2>;
		 battery,full_check_type_2nd = <2>;
		 battery,input_current_limit = <
			 500 450 500 1200 500 1200 1200 1000 1000 1000
			 1000 500 500 1200 1000 500 450>;
		 battery,fast_charging_current =	<
			 500 450 500 1200 500 1200 1200 1000 1000 1000
			 1000 500 500 1200 1000 500 450>;
		 battery,full_check_current_1st = <
			 300 0 300 300 300 300 300 300 300 300
			 300 300 300 300 300 300 0>;
		 battery,full_check_current_2nd = <
			 100 0 100 100 100 100 100 100 100 100
			 100 100 100 100 100 100 0>;
	 };

	usbpd-s2mu106@3C {
		compatible = "sec-usbpd,i2c";
		reg = <0x3C>;
		pinctrl-names = "default";
		pinctrl-0 = <&usbpd_irq>;
		usbpd,usbpd_int = <&gpa0 2 0>;

		pdic-manager {
			/* sink */
			pdic,max_power = <5000>;
			pdic_op_power = <2500>;
			pdic_max_voltage = <6000>;
			pdic_max_current = <2000>;
			pdic,min_current = <500>;

			pdic,giveback = <0>;
			pdic,usb_com_capable = <1>;
			pdic,no_usb_suspend = <1>;

			/* source */
			source,max_voltage = <5000>;
			source,min_voltage = <4000>;
			source,max_power = <2500>;

			/* sink cap */
			sink,capable_max_voltage = <5000>;
		};
	};
};

&dwmmc_0 {
        #address-cells = <1>;
        #size-cells = <0>;
        status = "okay";
        num-slots = <1>;
        broken-cd;
        fixed_voltage;
        //supports-highspeed;
        //mmc-ddr-1_8v;
        //mmc-hs200-1_8v;
        //mmc-hs400-1_8v;
        supports-8bit;
        supports-cmd23;
        supports-erase;
        //mmc-hs400-enhanced-strobe;
        card-init-hwacg-ctrl;
        qos-dvfs-level = <334000>;
        enable-ulp-mode;
        support-cmdq;
        fifo-depth = <0x40>;
        non-removable;
        desc-size = <4>;
        card-detect-delay = <200>;
        samsung,dw-mshc-ciu-div = <3>;
        samsung,dw-mshc-txdt-crc-timer-fastlimit = <0x34>;
        samsung,dw-mshc-txdt-crc-timer-initval = <0x38>;
        samsung,dw-mshc-hs400-tx-delay-line = <0x40>;
        samsung,dw-mshc-hs400-delay-line = <0x60>;
        samsung,dw-mshc-sdr-timing = <3 0 4 0>;
        samsung,dw-mshc-ddr-timing = <3 0 4 2>;
        samsung,dw-mshc-hs200-timing = <3 0 3 0>;
        samsung,dw-mshc-hs400-timing = <1 0 2 0>;
        samsung,dw-mshc-hs400-ulp-timing = <3 0 4 2>;

        num-ref-clks = <12>;
        ciu_clkin = <25 50 50 25 50 100 200 50 50 200 200 200>;

        /* Swapping clock drive strength */
        clk-drive-number = <4>;
        pinctrl-names = "default",
                "fast-slew-rate-1x",
                "fast-slew-rate-2x",
                "fast-slew-rate-3x",
                "fast-slew-rate-4x";
        pinctrl-0 = <&sd0_clk &sd0_cmd &sd0_rdqs &sd0_nreset &sd0_bus1 &sd0_bus4 &sd0_bus8>;
        pinctrl-1 = <&sd0_clk_fast_slew_rate_1x>;
        pinctrl-2 = <&sd0_clk_fast_slew_rate_2x>;
        pinctrl-3 = <&sd0_clk_fast_slew_rate_3x>;
        pinctrl-4 = <&sd0_clk_fast_slew_rate_4x>;

        slot@0 {
                reg = <0>;
                bus-width = <8>;
        };
};

&panel_0 {
	/* reset, power(ldo_en) */
	gpios = <&gpg2 5 0x1>, <&gpg1 1 0x1>;
	/* ldo28, buck5 */
	regulator_1p8v = "vdd_ldo28";
};
